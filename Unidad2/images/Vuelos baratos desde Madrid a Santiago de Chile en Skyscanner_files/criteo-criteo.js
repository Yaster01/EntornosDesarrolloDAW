(window.jsTagManagerJsonpCallback=window.jsTagManagerJsonpCallback||[]).push([[5],{113:function(e,t,r){"use strict";r.r(t),r.d(t,"criteo",function(){return I}),r.d(t,"getInOutCode",function(){return v});var i=r(2),n=r(25),a=r(20),o={AE:55781,AR:13381,AT:18942,AU:9736,BR:48339,CA:13385,CH:18948,CO:57616,CZ:18943,DE:7450,DK:7459,ES:7447,FI:17297,FR:3491,GR:18944,HK:16133,ID:21464,IE:17933,IL:46745,IN:13082,IT:7448,JP:13710,KR:21463,MX:13382,MY:14976,NL:7449,NO:7458,NZ:18568,PH:55780,PL:18572,PT:18947,RU:7446,SE:3686,SG:14979,TH:13734,TR:7444,TW:16134,UK:2936,US:18945},c={AU:24198,KR:21721,HK:21720,TW:21722,UK:14030,US:14031,FR:14026,IT:22956,RU:14029},u=["AU","KR","HK","TW","US","UK","IT","FR","RU"],d=["AU","KR","HK","TW"],s=function(e){return new Date(e).toISOString().substr(0,10)},p=function(e){var t=new Date(e).toISOString(),r=t.indexOf("T");return t.substr(r+1,5)},f=function(e){return e.isMobile?"m":e.isBrowser?"d":e.isTablet?"t":"d"},m=function(e){return{event:"setAccount",account:e}},v=function(e){var t=e.originAirport||e.originId||e.originCityId,r=e.destinationAirport||e.destinationId||e.destinationCityId,i=n.a.getWindow();if(t&&r)return"".concat(t,"_").concat(r);if("redir"===e.page&&i.utag_data){var a=i.utag_data.TransportSearch;return"".concat(a.Inbound.Airport,"_").concat(a.Outbound.Airport)}},C=function(e,t,r){var i,n=e.page||"",a=n.toLowerCase(),C=[];if(C.push(function(e){return{event:"setSiteType",type:f(e)}}(e)),"redir"!==n&&C.push(m(o[e.market])),"home"===a&&C.push({event:"viewHome"}),["day-view","month","browse"].indexOf(a)>-1&&C.push({event:"viewItem",item:e.combo_OutInCode}),"day-view"===a&&C.push({event:"viewSearch",checkin_date:e.outboundDate,checkout_date:e.inboundDate}),"redir"===a){var I=e.market?e.market.toUpperCase():"",h={};"carhire"===e.category&&u.indexOf(I)>-1?(C.push(m(c[e.market])),C.push(function(e){var t=e.pickUpIataCodeCarHire,r=t&&"unknown"!==t?t:e.pickUpCityCodeCarHire;return{event:"trackTransaction",id:e.redirectId,din:e.carHirePickUpDate?s(e.carHirePickUpDate):"",dout:e.carHireDropOffDate?s(e.carHireDropOffDate):"",tin:e.carHirePickUpTime?p(e.carHirePickUpTime):"",tout:e.carHireDropOffTime?p(e.carHireDropOffTime):"",item:[{id:"".concat(r),price:e.redirectValue||1,quantity:1}]}}(e))):"transport"===e.category&&u.indexOf(I)>-1?(d.indexOf(I)>-1&&C.push(function(e){return{event:"viewItem",account:c[e.market],item:e.destinationIata,din:e.inboundDate,dout:e.outboundDate,place:"flightconversion"}}(e)),C.push({event:"trackTransaction",account:o[(i=e).market],id:i.redirectId,item:[{id:v(i),price:i.redirectValue||1,quantity:1}]})):(h={event:"trackTransaction",account:t,id:e.redirectId,new_customer:e.criteo_nc,item:[{id:e.combo_OutInCode,price:e.redirectValue,quantity:1}]},C.push(h))}return null!=r&&C.push({event:"setHashedEmail",m:r,hash_method:"s2m"}),C},I=function(e,t){i.default.subscribe("criteo-event",function(e){return function(e){var t=n.a.getWindow();if(!e||!e.event)throw new Error("event required");if(!e.id)throw new Error("id required");var r={event:e.event,id:e.id,new_customer:e.new_customer||1,deduplication:e.deduplication||0,item:e.item||[]};return t.criteo_q&&t.criteo_q.push(r)}(e)});var r=function(e){if(!e)throw new Error("__tagmanagerProps required");var t=Object.assign({},e),r=function(e){if(e)return"return"===e?"0":"1"}(t.tripType);void 0!==r&&(t.criteo_nc=r);var i=v(e);return i&&(t.combo_OutInCode=i),e.destinationCityId&&(t.destinationCityId=e.destinationCityId),t.pickUpIataCodeCarHire=e.pickUpIataCodeCarHire?e.pickUpIataCodeCarHire:0,t.dropOffIataCodeCarHire=e.dropOffIataCodeCarHire?e.dropOffIataCodeCarHire:0,t}(e),c=new a.LocalStorage("auth-storage").tryGetValue("emhash",!1,!0),u=C(r,"".concat(e.market?o[e.market.toUpperCase()]:""),c),d=n.a.getWindow();d.criteo_q=d.criteo_q||[],u.forEach(function(e){d.criteo_q.push(e)}),t("//static.criteo.net/js/ld/ld.js",null,null,"anonymous")};t.default=I}}]);
//# sourceMappingURL=criteo-criteo.e6107797.chunk.js.map